(function(){(function(t){"object"==typeof exports&&"object"==typeof module?t(require("jquery"),require("plotly.js")):"function"==typeof define&&define.amd?define(["jquery","plotly.js"],t):t(jQuery,Plotly)})(function(j,x){var t,e;return t=function(m,w,b){return null==m&&(m={}),null==w&&(w={}),null==b&&(b=!1),function(s,t){var e,o,n,l,h,r,u,i,a,g,p,y,d,c,f,v;if(r={localeStrings:{vs:"vs",by:"by"},plotly:{},plotlyConfig:{}},t=j.extend(!0,{},r,t),d=s.getRowKeys(),e=s.getColKeys(),0===(v=b?e:d).length&&v.push([]),0===(h=b?d:e).length&&h.push([]),u=s.aggregatorName,s.valAttrs.length&&(u+="("+s.valAttrs.join(", ")+")"),l=v.map(function(t){var e,o,n,l,r,i,a;for(r=[],o=[],i=0,a=h.length;i<a;i++)e=h[i],l=parseFloat(s.getAggregator(b?e:t,b?t:e).value()),r.push(isFinite(l)?l:null),o.push(e.join("-")||" ");return n={name:t.join("-")||u},"pie"===m.type?(n.values=r,n.labels=1<o.length?o:[u]):(n.x=b?r:o,n.y=b?o:r),j.extend(n,m)}),i=b?(a=s.rowAttrs.join("-"),s.colAttrs.join("-")):(a=s.colAttrs.join("-"),s.rowAttrs.join("-")),f=u,""!==a&&(f+=" "+t.localeStrings.vs+" "+a),""!==i&&(f+=" "+t.localeStrings.by+" "+i),p={title:f,hovermode:"closest",width:window.innerWidth/1.4,height:window.innerHeight/1.4-50},"pie"===m.type){for(g in o=Math.ceil(Math.sqrt(l.length)),c=Math.ceil(l.length/o),p.grid={columns:o,rows:c},l)(n=l[g]).domain={row:Math.floor(g/o),column:g-o*Math.floor(g/o)},1<l.length&&(n.title=n.name);1===l[0].labels.length&&(p.showlegend=!1)}else p.xaxis={title:b?u:null,automargin:!0},p.yaxis={title:b?null:u,automargin:!0};return y=j("<div>").appendTo(j("body")),x.newPlot(y[0],l,j.extend(p,w,t.plotly),t.plotlyConfig),y.detach()}},e=function(){return function(t,e){var o,n,l,r,i,a,s,h,u,g,p,y,d,c;for(r={localeStrings:{vs:"vs",by:"by"},plotly:{},plotlyConfig:{}},e=j.extend(!0,{},r,e),0===(u=t.getRowKeys()).length&&u.push([]),0===(n=t.getColKeys()).length&&n.push([]),l={x:[],y:[],text:[],type:"scatter",mode:"markers"},p=0,d=u.length;p<d;p++)for(h=u[p],y=0,c=n.length;y<c;y++)o=n[y],null!=(g=t.getAggregator(h,o).value())&&(l.x.push(o.join("-")),l.y.push(h.join("-")),l.text.push(g));return i={title:t.rowAttrs.join("-")+" vs "+t.colAttrs.join("-"),hovermode:"closest",xaxis:{title:t.colAttrs.join("-"),automargin:!0},yaxis:{title:t.rowAttrs.join("-"),automargin:!0},width:window.innerWidth/1.5,height:window.innerHeight/1.4-50},a=j("<div>",{style:"display:none;"}).appendTo(j("body")),s=j("<div>").appendTo(a),x.newPlot(s[0],[l],j.extend(i,e.plotly),e.plotlyConfig),s.detach(),a.remove(),s}},j.pivotUtilities.plotly_renderers={"Horizontal Bar Chart":t({type:"bar",orientation:"h"},{barmode:"group"},!0),"Horizontal Stacked Bar Chart":t({type:"bar",orientation:"h"},{barmode:"relative"},!0),"Bar Chart":t({type:"bar"},{barmode:"group"}),"Stacked Bar Chart":t({type:"bar"},{barmode:"relative"}),"Line Chart":t(),"Area Chart":t({stackgroup:1}),"Scatter Chart":e(),"Multiple Pie Chart":t({type:"pie",scalegroup:1,hoverinfo:"label+value",textinfo:"none"},{},!0)}})}).call(this);