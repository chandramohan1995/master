(function(){(function(e){"object"==typeof exports&&"object"==typeof module?e(require("jquery"),require("d3")):"function"==typeof define&&define.amd?define(["jquery","d3"],e):e(jQuery,d3)})(function(y,g){return y.pivotUtilities.d3_renderers={Treemap:function(e,t){var a,n,i,r,u,l,d,o,c,h,f,s,p;for(i={localeStrings:{},d3:{width:function(){return y(window).width()/1.4},height:function(){return y(window).height()/1.4}}},t=y.extend(!0,{},i,t),u=y("<div>").css({width:"100%",height:"100%"}),d={name:"All",children:[]},a=function(e,t,n){var i,r,u,l,d,o;if(0!==t.length){for(null==e.children&&(e.children=[]),u=t.shift(),l=0,d=(o=e.children).length;l<d;l++)if((i=o[l]).name===u)return void a(i,t,n);return a(r={name:u},t,n),e.children.push(r)}e.value=n},f=0,s=(p=e.getRowKeys()).length;f<s;f++)l=p[f],null!=(c=e.getAggregator(l,[]).value())&&a(d,l,c);return n=g.scale.category10(),h=t.d3.width(),r=t.d3.height(),o=g.layout.treemap().size([h,r]).sticky(!0).value(function(e){return e.size}),g.select(u[0]).append("div").style("position","relative").style("width",h+"px").style("height",r+"px").datum(d).selectAll(".node").data(o.padding([15,0,0,0]).value(function(e){return e.value}).nodes).enter().append("div").attr("class","node").style("background",function(e){return null!=e.children?"lightgrey":n(e.name)}).text(function(e){return e.name}).call(function(){this.style("left",function(e){return e.x+"px"}).style("top",function(e){return e.y+"px"}).style("width",function(e){return Math.max(0,e.dx-1)+"px"}).style("height",function(e){return Math.max(0,e.dy-1)+"px"})}),u}}})}).call(this);
