(function() {
    (function(e) {
        "object" == typeof exports && "object" == typeof module ? e(require("jquery"), require("d3")) : "function" == typeof define && define.amd ? define(["jquery", "d3"], e) : e(jQuery, d3)
    })(function(e, t) {
        return e.pivotUtilities.d3_renderers = {
            Treemap: function(n, i) {
                var r, u, l, d, o, a, c, h, f, s, p, y, g;
                for (l = {
                        localeStrings: {},
                        d3: {
                            width: function() {
                                return e(window).width() / 1.4
                            },
                            height: function() {
                                return e(window).height() / 1.4
                            }
                        }
                    }, i = e.extend(!0, {}, l, i), o = e("<div>").css({
                        width: "100%",
                        height: "100%"
                    }), c = {
                        name: "All",
                        children: []
                    }, r = function(e, t, n) {
                        var i, u, l, d, o, a;
                        if (0 !== t.length) {
                            for (null == e.children && (e.children = []), l = t.shift(), d = 0, o = (a = e.children).length; d < o; d++)
                                if ((i = a[d]).name === l) return void r(i, t, n);
                            return r(u = {
                                name: l
                            }, t, n), e.children.push(u)
                        }
                        e.value = n
                    }, p = 0, y = (g = n.getRowKeys()).length; p < y; p++) a = g[p], null != (f = n.getAggregator(a, []).value()) && r(c, a, f);
                return u = t.scale.category10(), s = i.d3.width(), d = i.d3.height(), h = t.layout.treemap().size([s, d]).sticky(!0).value(function(e) {
                    return e.size
                }), t.select(o[0]).append("div").style("position", "relative").style("width", s + "px").style("height", d + "px").datum(c).selectAll(".node").data(h.padding([15, 0, 0, 0]).value(function(e) {
                    return e.value
                }).nodes).enter().append("div").attr("class", "node").style("background", function(e) {
                    return null != e.children ? "lightgrey" : u(e.name)
                }).text(function(e) {
                    return e.name
                }).call(function() {
                    this.style("left", function(e) {
                        return e.x + "px"
                    }).style("top", function(e) {
                        return e.y + "px"
                    }).style("width", function(e) {
                        return Math.max(0, e.dx - 1) + "px"
                    }).style("height", function(e) {
                        return Math.max(0, e.dy - 1) + "px"
                    })
                }), o
            }
        }
    })
}).call(this);